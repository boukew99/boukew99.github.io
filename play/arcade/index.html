<!--https://emojipedia.org/symbols/ https://jsoneditoronline.org/ https://javascript.plainenglish.io/how-to-make-a-game-boy-drum-machine-using-javascript-html-and-css-c389f032791a https://www.w3schools.com/graphics/game_controllers.asp https://emulatorgames.online/games/gba/pokemon-fire-red-version https://www.lexaloffle.com/pico-8.php https://stackoverflow.com/questions/9419263/how-to-play-audio


<https://www.redblobgames.com/grids/edges/>
<https://www.redblobgames.com/grids/parts/>


-->

<!DOCTYPE html>
<html lang="en">
<title>arcade</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="../boukew99.css"> 
<link rel="icon" type="image/x-icon" href="arcade.ico">
<style>
	body {
		margin-bottom: 0%;
	}
div {
	display: grid;
}
canvas {
	width: 100%;
	max-height:100%;
}
#input button {
  padding: 5px;
  font-size: 50px;
}

#canvas {
	border-style: solid;
	border-width:thin;
	background-color: #f1f1f1
}
</style>

</div>
<h1>arcade <button onclick="(music.play())">‚ñ∂</button>
	<button onclick="(music.pause())">‚è∏</button>
	<audio loop id=music><source src="sonic_pi_loop.mp3" type="audio/mp3"></audio></h1>
	<dialog id=dialogbox>
		<p>Hey I'm XXX. I came here to test this dialog box. I sure hope everything will be allright, since I will be going home soon to feed my kids with the money I earned here.</p>
		</dialog>
<canvas id=canvas width=512 height=384>
	<img id=hill_town src=hill_town.png>
	<img id=duck src=duck.png>
</canvas>

<div>
<center>
<table id=input>
	<tr>
	</tr>
	<tr>
		<td><button>üü•</button></td>
		<td><button id=up onclick="moveup()">‚¨ÜÔ∏è</button></td>
		<td><button>üü©</button></td>
	</tr>
	<tr>
		<td><button id=left onclick="moveleft()">‚¨ÖÔ∏è</button></td>
		<td><button id=ok onclick="document.getElementById('dialogbox').show()">üÜó</button></td>
		<td><button id=left onclick="moveright()">‚û°Ô∏è</button></td>
	</tr>
	<tr>
		<td><button>üü¶</button></td>
		<td><button id=down onclick="movedown()">‚¨áÔ∏è</button></td>
		<td><button>üü®Ô∏è</button></td>
	</tr>
</table>
</center>


<script>
// https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage

var previous_x = 0;
var previous_y = 0;
var x = 0;
var y = 0;
var player = document.getElementById("player")

window.onload = function(e) {
	var canvas = document.getElementById("canvas");
	var ctx = canvas.getContext("2d");
	ctx.imageSmoothingEnabled = false
  var img = document.getElementById("hill_town");
  ctx.drawImage(img, 10, 10, 502, 374);
  
  
};

function draw() {
	var canvas = document.getElementById("canvas");
	//https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Optimizing_canvas#turn_off_transparency
	var ctx = canvas.getContext("2d", { alpha: false });
//	ctx.clearRect(0, 0, 512, 384)
	var img = document.getElementById("duck");
	ctx.drawImage(img, x, y, 32, 32);
	ctx.clearRect(previous_x, previous_y, 32, 32);
	previous_x = x;
	previous_y = y;
}

function moveup() {
	if (y != 0) {
		y -= 32; draw()
		}
}

function movedown() {
	if (y != 384-32) {
    y += 32; draw()
    }
}

function moveleft() {
	if (x != 0) {
    x -= 32; draw()
    }
}

function moveright() {
	if (x != 512 -32) {
		x += 32; draw()
   }
}

var velocity = [0, 0]
function velocity() { //new_velocity, optional_y = 0
	if (arguments.length == 0) {return velocity}
	if (arguments.length == 1) {velocity = arguments[0]}
	if (arguments.lentgh == 2) {
		velocity[0] = Math.cos(arguments[0])
		velocity[1] = Math.sin(arguments[1])
		}
}
</script>
