<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- https://www.w3schools.com/tags/ref_canvas.asp, https://stackoverflow.com/questions/55677/how-do-i-get-the-coordinates-of-a-mouse-click-on-a-canvas-element/18053642#18053642 -->

<style>
    canvas{
        border: 2px solid #d3d3d3;;
        border-color: black;
    }
</style>
<title>TileDraw</title>
<html lang="en">
<h1>TileDraw</h1>
<img id=tilemap src=tilemap.png alt="tilemap" usemap="#tilemap">
<img id=preview>

<map name="tilemap">
  <area shape="rect" coords="0,0,16,16" alt="x" href="#x">
  <area shape="rect" coords="16,0,32,16" alt="y" href="#y">
  <area shape="rect" coords="32,0,48,16" alt="z" href="#z">
</map> 
<canvas id="canvas" width="400" height="400"></canvas>
<button id=save>Save</button><button id=restore>restore</button>
<a href=Instructions>Instructions</a>
<script>
var c = document.getElementById("canvas");
var ctx = c.getContext("2d");
var img = document.getElementById("tilemap");

canvas.onclick = function(e) {

  const rect = canvas.getBoundingClientRect()
  const x = event.clientX - rect.left
  const y = event.clientY - rect.top
  console.log("x: " + x + " y: " + y)
  ctx.drawImage(img, 16, 16, 32, 32, x, y, 32, 32)
}
    
save.onclick = function(e) {
	ctx.save()
}
    
restore.onclick = function(e) {
	ctx.restore()
}
</script>
